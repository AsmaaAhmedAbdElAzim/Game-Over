{"ast":null,"code":"import _regeneratorRuntime from\"E:/programing/taskes in corse/react/my Game over/Game-Over/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"E:/programing/taskes in corse/react/my Game over/Game-Over/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"E:/programing/taskes in corse/react/my Game over/Game-Over/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/programing/taskes in corse/react/my Game over/Game-Over/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Link,useNavigate}from'react-router-dom';import{useState}from'react';import Axios from'axios';import Joi from'joi';import{Helmet}from'react-helmet';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(_ref){var _errorList$filter$;var saveTokenUser=_ref.saveTokenUser;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],seterror=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loding=_useState6[0],setLoding=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),errorList=_useState8[0],seterrorList=_useState8[1];var navigat=useNavigate();function getUserData(e){var myUser=_objectSpread({},user);myUser[e.target.name]=e.target.value;setUser(myUser);console.log(myUser);}function sendDataToApi(){return _sendDataToApi.apply(this,arguments);}function _sendDataToApi(){_sendDataToApi=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$Axios$post,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Axios.post('https://movies-api.routemisr.com/signin',user);case 2:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;if(data.message==='success'){setLoding(false);localStorage.setItem('userTokenInStor',data.token);saveTokenUser();navigat('/home');}else{setLoding(false);seterror(data.message);}case 5:case\"end\":return _context.stop();}}},_callee);}));return _sendDataToApi.apply(this,arguments);}function submitFormlogin(e){e.preventDefault();setLoding(true);var validtion=validationForm();console.log(validtion);if(validtion.error){seterrorList(validtion.error.details);}else{sendDataToApi();}}function validationForm(){var regular=Joi.object({email:Joi.string().email({tlds:{allow:['com','net']}}),password:Joi.string().pattern(/^[a-z]{3,9}@[0-9]{3}$/)});return regular.validate(user,{abortEarly:false});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"meta\",{charSet:\"utf-8\"}),/*#__PURE__*/_jsx(\"title\",{children:\"Game Over\"}),/*#__PURE__*/_jsx(\"link\",{rel:\"canonical\",href:\"http://mysite.com/example\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"registerContainer container \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-0 \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"regsterImg\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rgesterForm p-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center\",children:\"Log in to GameOver\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitFormlogin,className:\"mt-5\",children:[error?/*#__PURE__*/_jsx(\"small\",{className:\" text-danger\",children:error}):'',/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"email\",name:\"email\",placeholder:\"Email Address\",id:\"email\",className:\"form-control myInput my-2 py-2\"}),/*#__PURE__*/_jsx(\"small\",{className:\"d-block text-danger\",children:(_errorList$filter$=errorList.filter(function(error){return error.context.label==='email';})[0])===null||_errorList$filter$===void 0?void 0:_errorList$filter$.message}),/*#__PURE__*/_jsx(\"input\",{onChange:getUserData,type:\"password\",name:\"password\",placeholder:\"Password\",id:\"password\",className:\"form-control myInput my-2 py-2\"}),errorList.map(function(error,index){if(error.context.label==='password'){return/*#__PURE__*/_jsx(\"small\",{className:\"text-danger d-block \",children:\"password by should start with upperCase then 3 to 8 lowerrCase\"},index);}else{return'';}}),/*#__PURE__*/_jsx(\"div\",{onChange:getUserData,className:\"submitBtn m-auto my-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn submit text-white\",children:loding?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-spinner fa-spin\"}):'logIn'})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Forgot Password?\"})}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-center\",children:[\"Not a member yet?\",/*#__PURE__*/_jsx(Link,{to:\"/register\",children:\"Creat Account \"})]})})]})]})})]})})]});}","map":{"version":3,"names":["React","Link","useNavigate","useState","Axios","Joi","Helmet","Login","saveTokenUser","email","password","user","setUser","error","seterror","loding","setLoding","errorList","seterrorList","navigat","getUserData","e","myUser","target","name","value","console","log","sendDataToApi","post","data","message","localStorage","setItem","token","submitFormlogin","preventDefault","validtion","validationForm","details","regular","object","string","tlds","allow","pattern","validate","abortEarly","filter","context","label","map","index"],"sources":["E:/programing/taskes in corse/react/my Game over/Game-Over/src/Component/Login/Login.jsx"],"sourcesContent":["import React from 'react'\r\nimport {Link, useNavigate} from 'react-router-dom'\r\nimport { useState } from 'react'\r\nimport Axios from 'axios';\r\nimport Joi from 'joi'\r\nimport { Helmet } from 'react-helmet';\r\n\r\nexport default function Login({saveTokenUser}) {\r\n  let [user,setUser]=useState({\r\n   \r\n    email:\"\",\r\n    password:\"\",\r\n    \r\n  })\r\n  let [error,seterror]=useState('');\r\n  \r\n  const [loding, setLoding] = useState(false);\r\n  const [errorList, seterrorList] = useState([]);\r\n  let navigat = useNavigate();\r\n  \r\n  function getUserData(e){\r\n    let myUser= {...user};\r\n    myUser[e.target.name]=e.target.value;\r\n    setUser(myUser)\r\n    console.log(myUser);\r\n    \r\n  }\r\n  \r\n  async function sendDataToApi(){\r\n    let {data} =await Axios.post('https://movies-api.routemisr.com/signin',user)\r\n    if(data.message === 'success'){\r\n      setLoding(false)\r\n      localStorage.setItem('userTokenInStor', data.token);\r\n      saveTokenUser()\r\n      navigat('/home')\r\n      \r\n    }\r\n    else{\r\n      setLoding(false)\r\n        seterror(data.message)\r\n    }\r\n  }\r\n  \r\n  \r\n  function submitFormlogin(e){\r\n    e.preventDefault();\r\n    setLoding(true);\r\n    \r\n    let validtion = validationForm();\r\n    console.log(validtion);\r\n    if( validtion.error){\r\n      seterrorList(validtion.error.details)\r\n    }\r\n    else\r\n    {\r\n      sendDataToApi();\r\n    }\r\n    \r\n  }\r\n  function validationForm(){\r\n    let regular = Joi.object({\r\n     \r\n      email: Joi.string().email({tlds:{allow :['com','net']}}),\r\n      password: Joi.string().pattern(/^[a-z]{3,9}@[0-9]{3}$/)\r\n    });\r\n    return regular.validate(user,{abortEarly:false}); \r\n  }\r\n  \r\n  \r\n    return <>\r\n    <Helmet>\r\n                <meta charSet=\"utf-8\" />\r\n                <title>Game Over</title>\r\n                <link rel=\"canonical\" href=\"http://mysite.com/example\" />\r\n            </Helmet>\r\n      <div className=\"registerContainer container \">\r\n        <div className=\"row g-0 \">\r\n          <div className=\"col-md-6\">\r\n            <div className=\"regsterImg\">\r\n  \r\n            </div>\r\n          </div>\r\n  \r\n          <div className=\"col-md-6\">\r\n          <div className=\"rgesterForm p-5\">\r\n            <h2 className='text-center'>Log in to GameOver</h2>\r\n            <form onSubmit={submitFormlogin} className='mt-5'>\r\n            {error?<small className=\" text-danger\">{error}</small>:''}\r\n          \r\n              \r\n              <input onChange={getUserData} type=\"email\" name='email'placeholder='Email Address' id='email' className='form-control myInput my-2 py-2'/>\r\n              <small className='d-block text-danger'>{errorList.filter((error)=> error.context.label === 'email')[0]?.message}</small>\r\n              \r\n              <input onChange={getUserData} type=\"password\" name='password'placeholder='Password' id='password' className='form-control myInput my-2 py-2'/>\r\n              {errorList.map((error,index)=>{if (error.context.label === 'password'){\r\n              return <small key={index} className='text-danger d-block '>password by should start with upperCase then 3 to 8 lowerrCase</small>\r\n            }else{ return ''}})}\r\n              <div onChange={getUserData} className=\"submitBtn m-auto my-3\">\r\n                <button className='btn submit text-white'>\r\n                  {loding?<i className='fas fa-spinner fa-spin'></i>:'logIn'}</button>\r\n              </div>\r\n  \r\n              <div><p className='text-center'>Forgot Password?</p></div>\r\n              <hr />\r\n              <div><p className='text-center'>Not a member yet?<Link to='/register'>Creat Account </Link></p></div>\r\n              \r\n            </form>\r\n  \r\n          </div>\r\n        </div>\r\n  \r\n        </div>\r\n        \r\n  \r\n  \r\n      </div>\r\n    </>\r\n\r\n          }\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}